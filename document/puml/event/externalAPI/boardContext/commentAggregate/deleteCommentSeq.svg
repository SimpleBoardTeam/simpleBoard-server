<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="717px" preserveAspectRatio="none" style="width:1776px;height:717px;background:#FFFFFF;" version="1.1" viewBox="0 0 1776 717" width="1776px" zoomAndPan="magnify"><title>Delete comment</title><defs/><g><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="129.7188" x="820.4104" y="27.9951">Delete comment</text><g><title>Comment</title><rect fill="#FFFFFF" height="169.7969" style="stroke:#181818;stroke-width:1;" width="10" x="915.7681" y="223.125"/></g><rect fill="none" height="235.8672" style="stroke:#000000;stroke-width:1.5;" width="1141.0132" x="10" y="296.3906"/><g><title>Client</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="39.2651" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="43" x2="43" y1="118.5938" y2="636.6563"/></g><g><title>CommentController</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="299.5503" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="302.668" x2="302.668" y1="118.5938" y2="636.6563"/></g><g><title>CommentCommandService</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="598.6641" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="602.52" x2="602.52" y1="118.5938" y2="636.6563"/></g><g><title>CommentRepository</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="790.6401" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="793.8081" x2="793.8081" y1="118.5938" y2="636.6563"/></g><g><title>Comment</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="916.7681" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="920.4722" x2="920.4722" y1="118.5938" y2="636.6563"/></g><g><title>DomainEventPublisher</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="1050.5386" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1054.064" x2="1054.064" y1="118.5938" y2="636.6563"/></g><g><title>CommentDeletedHandler</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="1243.3145" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1247.0132" x2="1247.0132" y1="118.5938" y2="636.6563"/></g><g><title>PostReadCacheRepository</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="1479.396" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1483.292" x2="1483.292" y1="118.5938" y2="636.6563"/></g><g><title>Cache</title><rect fill="#000000" fill-opacity="0.00000" height="518.0625" width="8" x="1737.7705" y="118.5938"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1741.0015" x2="1741.0015" y1="118.5938" y2="636.6563"/></g><g class="participant participant-head" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="20" y="115.292">Client</text><ellipse cx="43.2651" cy="50.7969" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.2651,58.7969 L43.2651,85.7969 M30.2651,66.7969 L56.2651,66.7969 M43.2651,85.7969 L30.2651,100.7969 M43.2651,85.7969 L56.2651,100.7969" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-tail" data-participant="Client"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="40.5303" x="20" y="648.6514">Client</text><ellipse cx="43.2651" cy="660.4531" fill="#E2E2F0" rx="8" ry="8" style="stroke:#181818;stroke-width:0.5;"/><path d="M43.2651,668.4531 L43.2651,695.4531 M30.2651,676.4531 L56.2651,676.4531 M43.2651,695.4531 L30.2651,710.4531 M43.2651,695.4531 L56.2651,710.4531" fill="none" style="stroke:#181818;stroke-width:0.5;"/></g><g class="participant participant-head" data-participant="CommentController"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.7646" x="227.668" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.7646" x="234.668" y="107.292">CommentController</text></g><g class="participant participant-tail" data-participant="CommentController"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="151.7646" x="227.668" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.7646" x="234.668" y="655.6514">CommentController</text></g><g class="participant participant-head" data-participant="CommentCommandService"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206.2881" x="499.52" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192.2881" x="506.52" y="107.292">CommentCommandService</text></g><g class="participant participant-tail" data-participant="CommentCommandService"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="206.2881" x="499.52" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="192.2881" x="506.52" y="655.6514">CommentCommandService</text></g><g class="participant participant-head" data-participant="CommentRepository"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157.6641" x="715.8081" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143.6641" x="722.8081" y="107.292">CommentRepository</text></g><g class="participant participant-tail" data-participant="CommentRepository"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="157.6641" x="715.8081" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="143.6641" x="722.8081" y="655.6514">CommentRepository</text></g><g class="participant participant-head" data-participant="Comment"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.5918" x="883.4722" y="115.292">Comment</text><ellipse cx="920.7681" cy="86.2969" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="908.7681" x2="932.7681" y1="100.2969" y2="100.2969"/></g><g class="participant participant-tail" data-participant="Comment"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="68.5918" x="883.4722" y="648.6514">Comment</text><ellipse cx="920.7681" cy="667.9531" fill="#E2E2F0" rx="12" ry="12" style="stroke:#181818;stroke-width:0.5;"/><line style="stroke:#181818;stroke-width:0.5;" x1="908.7681" x2="932.7681" y1="681.9531" y2="681.9531"/></g><g class="participant participant-head" data-participant="DomainEventPublisher"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172.9492" x="968.064" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158.9492" x="975.064" y="107.292">DomainEventPublisher</text></g><g class="participant participant-tail" data-participant="DomainEventPublisher"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="172.9492" x="968.064" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="158.9492" x="975.064" y="655.6514">DomainEventPublisher</text></g><g class="participant participant-head" data-participant="CommentDeletedHandler"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192.6025" x="1151.0132" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.6025" x="1158.0132" y="107.292">CommentDeletedHandler</text></g><g class="participant participant-tail" data-participant="CommentDeletedHandler"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="192.6025" x="1151.0132" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="178.6025" x="1158.0132" y="655.6514">CommentDeletedHandler</text></g><g class="participant participant-head" data-participant="PostReadCacheRepository"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198.208" x="1384.292" y="87.2969"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184.208" x="1391.292" y="107.292">PostReadCacheRepository</text></g><g class="participant participant-tail" data-participant="PostReadCacheRepository"><rect fill="#E2E2F0" height="30.2969" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="198.208" x="1384.292" y="635.6563"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="184.208" x="1391.292" y="655.6514">PostReadCacheRepository</text></g><g class="participant participant-head" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5381" x="1717.0015" y="115.292">Cache</text><path d="M1723.7705,66.2969 C1723.7705,56.2969 1741.7705,56.2969 1741.7705,56.2969 C1741.7705,56.2969 1759.7705,56.2969 1759.7705,66.2969 L1759.7705,92.2969 C1759.7705,102.2969 1741.7705,102.2969 1741.7705,102.2969 C1741.7705,102.2969 1723.7705,102.2969 1723.7705,92.2969 L1723.7705,66.2969" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1723.7705,66.2969 C1723.7705,76.2969 1741.7705,76.2969 1741.7705,76.2969 C1741.7705,76.2969 1759.7705,76.2969 1759.7705,66.2969" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g class="participant participant-tail" data-participant="Cache"><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="43.5381" x="1717.0015" y="648.6514">Cache</text><path d="M1723.7705,661.9531 C1723.7705,651.9531 1741.7705,651.9531 1741.7705,651.9531 C1741.7705,651.9531 1759.7705,651.9531 1759.7705,661.9531 L1759.7705,687.9531 C1759.7705,697.9531 1741.7705,697.9531 1741.7705,697.9531 C1741.7705,697.9531 1723.7705,697.9531 1723.7705,687.9531 L1723.7705,661.9531" fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M1723.7705,661.9531 C1723.7705,671.9531 1741.7705,671.9531 1741.7705,671.9531 C1741.7705,671.9531 1759.7705,671.9531 1759.7705,661.9531" fill="none" style="stroke:#181818;stroke-width:1.5;"/></g><g><title>Comment</title><rect fill="#FFFFFF" height="169.7969" style="stroke:#181818;stroke-width:1;" width="10" x="915.7681" y="223.125"/></g><g class="message" data-participant-1="Client" data-participant-2="CommentController"><polygon fill="#181818" points="291.5503,160.8594,301.5503,164.8594,291.5503,168.8594,295.5503,164.8594" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="43.2651" x2="297.5503" y1="164.8594" y2="164.8594"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="49.8354" x="50.2651" y="144.6606">DELETE</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.686" x="50.2651" y="159.7935">/comments/{commentId}</text></g><g class="message" data-participant-1="CommentController" data-participant-2="CommentCommandService"><polygon fill="#181818" points="590.6641,189.9922,600.6641,193.9922,590.6641,197.9922,594.6641,193.9922" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="303.5503" x2="596.6641" y1="193.9922" y2="193.9922"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="275.1138" x="310.5503" y="188.9263">createComment(Visitor, commentId, cmd)</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="CommentRepository"><polygon fill="#181818" points="782.6401,219.125,792.6401,223.125,782.6401,227.125,786.6401,223.125" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.6641" x2="788.6401" y1="223.125" y2="223.125"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="137.3696" x="609.6641" y="218.0591">findById(commentId)</text></g><g class="message" data-participant-1="CommentRepository" data-participant-2="CommentCommandService"><polygon fill="#181818" points="613.6641,248.2578,603.6641,252.2578,613.6641,256.2578,609.6641,252.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="607.6641" x2="793.6401" y1="252.2578" y2="252.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="63.6924" x="619.6641" y="247.1919">Comment</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="Comment"><polygon fill="#181818" points="903.7681,277.3906,913.7681,281.3906,903.7681,285.3906,907.7681,281.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.6641" x2="909.7681" y1="281.3906" y2="281.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.8228" x="609.6641" y="276.3247">canDelete(Visitor, cmd)</text></g><path d="M10,296.3906 L74.4429,296.3906 L74.4429,303.5234 L64.4429,313.5234 L10,313.5234 L10,296.3906" fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="235.8672" style="stroke:#000000;stroke-width:1.5;" width="1141.0132" x="10" y="296.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.4429" x="25" y="309.4575">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="111.6865" x="89.4429" y="308.6011">[Enalbe to delete]</text><g class="message" data-participant-1="Comment" data-participant-2="CommentCommandService"><polygon fill="#181818" points="613.6641,330.6563,603.6641,334.6563,613.6641,338.6563,609.6641,334.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="607.6641" x2="914.7681" y1="334.6563" y2="334.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="26.6792" x="619.6641" y="329.5903">true</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="Comment"><polygon fill="#181818" points="903.7681,359.7891,913.7681,363.7891,903.7681,367.7891,907.7681,363.7891" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.6641" x2="909.7681" y1="363.7891" y2="363.7891"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.2573" x="609.6641" y="358.7231">softDelete()</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="CommentRepository"><polygon fill="#181818" points="782.6401,388.9219,792.6401,392.9219,782.6401,396.9219,786.6401,392.9219" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.6641" x2="788.6401" y1="392.9219" y2="392.9219"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.2666" x="609.6641" y="387.856">save(Comment)</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="DomainEventPublisher"><polygon fill="#181818" points="1042.5386,418.0547,1052.5386,422.0547,1042.5386,426.0547,1046.5386,422.0547" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="602.6641" x2="1048.5386" y1="422.0547" y2="422.0547"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.8994" x="609.6641" y="416.9888">CommentDeletedEvent</text></g><g class="message" data-participant-1="CommentCommandService" data-participant-2="CommentController"><polygon fill="#181818" points="314.5503,447.1875,304.5503,451.1875,314.5503,455.1875,310.5503,451.1875" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="308.5503" x2="601.6641" y1="451.1875" y2="451.1875"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.1577" x="320.5503" y="446.1216">CommentDeleteResult</text></g><g class="message" data-participant-1="CommentController" data-participant-2="Client"><polygon fill="#181818" points="54.2651,476.3203,44.2651,480.3203,54.2651,484.3203,50.2651,480.3203" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="48.2651" x2="302.5503" y1="480.3203" y2="480.3203"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.2852" x="60.2651" y="475.2544">200 OK + CommentDeleteResponse</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="10" x2="1151.0132" y1="489.3203" y2="489.3203"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="113.1045" x="15" y="499.5308">[Unable to delete]</text><g class="message" data-participant-1="Comment" data-participant-2="Client"><polygon fill="#181818" points="54.2651,520.2578,44.2651,524.2578,54.2651,528.2578,50.2651,524.2578" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;stroke-dasharray:2.0,2.0;" x1="48.2651" x2="919.7681" y1="524.2578" y2="524.2578"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="106.3994" x="60.2651" y="519.1919">403 FORBIDDEN</text></g><g class="message" data-participant-1="DomainEventPublisher" data-participant-2="CommentDeletedHandler"><polygon fill="#181818" points="1235.3145,556.3906,1245.3145,560.3906,1235.3145,564.3906,1239.3145,560.3906" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1054.5386" x2="1241.3145" y1="560.3906" y2="560.3906"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="151.8994" x="1061.5386" y="555.3247">CommentDeletedEvent</text></g><g class="message" data-participant-1="CommentDeletedHandler" data-participant-2="PostReadCacheRepository"><polygon fill="#181818" points="1471.396,585.5234,1481.396,589.5234,1471.396,593.5234,1475.396,589.5234" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1247.3145" x2="1477.396" y1="589.5234" y2="589.5234"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.0815" x="1254.3145" y="584.4575">decreaseCommentCount(postId)</text></g><g class="message" data-participant-1="PostReadCacheRepository" data-participant-2="Cache"><polygon fill="#181818" points="1729.7705,614.6563,1739.7705,618.6563,1729.7705,622.6563,1733.7705,618.6563" style="stroke:#181818;stroke-width:1;"/><line style="stroke:#181818;stroke-width:1;" x1="1483.396" x2="1735.7705" y1="618.6563" y2="618.6563"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.3745" x="1490.396" y="613.5903">DECR post:{postId}:commentCount</text></g><!--SRC=[bLDDRy8m3BtdL_Wsq5Q1jfqux43RQMZJGEpZj4lQ614fJL2JLaA8_xwaAL1eoxIUsjf-p-_PDjm8X0W56eHKPHbAGmXDZSeX5DnzRMXkUCetL1e8VKQefCcL49XtHxECIlQ1USbJxCfOuaPfRZcsn7vniuNggQDd5P7AA9TnQVylYaHmlUuczHBOYoM-R6kXj6MaBAJf6XlKZ1gQK8rG1GZnUY5uQik42KJnM_mP_yXHxP8UxUgt6TkJco08e65B6w49s_J7GgSvKeDrTF3Dg_xku0XlNpCsz1m7LxknJYGddPPWnIMRRcTiS8IiqHfks9dpqhPnd48RABYYuQAgjoydbqe_hOPKfuyA0x6a8a4m2bYLSi2xoctometlRsQjLlMY38R_Sr3J4WTrO4WOjjpoVbPxse_SjSmdx-eLzXYzUdhMymnZYReGfci9NRLVymd0_NWCyrUuRHLlbDH8KDZR-98q4Rq3EK0zZX_WURwSpg8eVhStpGZfr7fg_lnUUqpephKWFITjOHYwQz9ur5xOaxBnQkVxobnRxbTrvk4INFvavwlsaxG1HNu1]--></g></svg>